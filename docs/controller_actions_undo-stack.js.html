<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: controller/actions/undo-stack.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: controller/actions/undo-stack.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const UNDO_LIMIT = 100;

/**
 * UndoStack manages the undo and redo stacks.
 *
 * UndoStack performs an action and records the undo action in the undo stack. Later the action can
 * be undone, and it will be recorded in the redo stack.
 *
 * UndoStack does not perform rendering or publishing changes to a datastore. Those operations should
 * be performed by a controller, usually the controller that causes UndoStack to perform an action.
 */
export class UndoStack {
  constructor() {
    this.undoStack = [];
    this.redoStack = [];
  }

  /**
   * Perform an action and remember the changes for later undo. This clears the redo stack.
   *
   * @param action      The action to perform
   * @param params      The parameters required by the action
   * @returns {boolean} True if any changes were made, false otherwise
   */
  do(action, ...params) {
    const undoFn = action(...params);
    if (undoFn) {
      this.undoStack.push(undoFn);
      this.redoStack = [];

      // Don't let the undo stack grow beyond the limit. This looks awful,
      // but the stack should never get more than 1 element too large, and
      // the browser can do shift really fast, so it's better than slice.
      while (this.undoStack.length > UNDO_LIMIT) {
        this.undoStack.shift();
      }

      return true;
    } else {
      return false;
    }
  }

  /**
   * Undo the last action carried out, and remember it for redo.
   */
  undo() {
    if (this.undoStack.length > 0) {
      this.redoStack.push(this.undoStack.pop()());
      return true;
    }
    return false;
  }

  /**
   * Redo the last action undone, and remember it for undo.
   */
  redo() {
    if (this.redoStack.length > 0) {
      this.undoStack.push(this.redoStack.pop()());
      return true;
    }
    return false;
  }

  /**
   * Check if there is anything to undo
   * @returns {boolean} True if undo will do anything
   */
  get canUndo() {
    return this.undoStack.length > 0;
  }

  /**
   * Get the length of the undo stack
   * @returns {number} the length of the undo stack
   */
  get undoLength() {
    return this.undoStack.length;
  }

  /**
   * Check if there is anything to redo
   * @returns {boolean} True if redo will do anything
   */
  get canRedo() {
    return this.redoStack.length > 0;
  }

  /**
   * Get the length of the redo stack
   * @returns {number} the length of the redo stack
   */
  get redoLength() {
    return this.redoStack.length;
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="View.html">View</a></li></ul><h3>Classes</h3><ul><li><a href="Fragment.html">Fragment</a></li><li><a href="Language.html">Language</a></li><li><a href="Route.html">Route</a></li><li><a href="UndoStack.html">UndoStack</a></li><li><a href="View.Spline.html">Spline</a></li></ul><h3>Global</h3><ul><li><a href="global.html#createJSX">createJSX</a></li><li><a href="global.html#DragDropSite">DragDropSite</a></li><li><a href="global.html#DragHandle">DragHandle</a></li><li><a href="global.html#DragImage">DragImage</a></li><li><a href="global.html#DragSource">DragSource</a></li><li><a href="global.html#DropTarget">DropTarget</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
